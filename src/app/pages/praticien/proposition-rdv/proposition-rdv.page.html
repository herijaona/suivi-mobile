<ion-header translutient="true">
  <ion-toolbar>
    <ion-buttons *ngIf="!ios && !showSearchbar" slot="start">
      <ion-menu-button></ion-menu-button>
      <ion-title *ngIf="!ios && !showSearchbar">Proposition</ion-title>
    </ion-buttons>
    <ion-menu-button *ngIf="ios" slot="start"></ion-menu-button>
    <ion-title *ngIf="ios">Proposition</ion-title>

    <ion-searchbar
      (ionInput)="filterItems($event)"
      debounce="500"
      placeholder="Rechercher"
      type="text"
      showCancelButton="always"
      *ngIf="showSearchbar"
      (ionCancel)="showSearchbar = false"
    ></ion-searchbar>
    <ion-buttons slot="end">
      <ion-button *ngIf="!ios && !showSearchbar" (click)="showSearchbar = true">
        <ion-icon slot="icon-only" name="search"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
  <ion-toolbar *ngIf="ios">
    <ion-searchbar
      (ionInput)="filterItems($event)"
      debounce="500"
      placeholder="Rechercher"
      type="text"
      (ionCancel)="showSearchbar = false"
    ></ion-searchbar>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-list lines="none" *ngIf="isItemAvailable">
    <ion-item-group *ngFor="let rdv of filterdItems">
      <ion-item-divider sticky>
        <ion-label class="ion-text-center"> {{ rdv.date}} </ion-label>
      </ion-item-divider>

      <ion-item-sliding
        *ngFor="let eachRdv of rdv.groups"
        #slidingItem
        class="test"
      >
        <ion-item *ngIf="eachRdv.patient !== null">
          <ion-avatar slot="start">
            <img src="../../../assets/images/img38.jpg" />
          </ion-avatar>
          <ion-label>
            <h2>{{eachRdv.patient.firstName}} {{eachRdv.patient.lastName}}</h2>
            <p>{{eachRdv.dateProposition}}</p>
            <p>{{eachRdv.descriptionProposition}}</p>
          </ion-label>
          <ion-icon slot="end" name="pencil-sharp" color="primary"></ion-icon>

          <ion-icon
            slot="end"
            name="trash-bin-sharp"
            color="sred"
            (click)="presentAlertConfirm(eachRdv.id)"
          ></ion-icon>
        </ion-item>
      </ion-item-sliding>
    </ion-item-group>
  </ion-list>
</ion-content>
<ion-fab vertical="bottom" horizontal="end" slot="fixed">
  <!-- <ion-fab-button [routerLink]="['new-rdv']"> -->
  <ion-fab-button (click)="openNewRdvModal()" color="sgreen">
    <ion-icon name="add"></ion-icon>
  </ion-fab-button>
</ion-fab>
